apply plugin: 'com.jfrog.bintray'
apply from: 'constants.gradle'

group = mavenGroup
version = mavenVersion

bintray {
    //load signing credentials from external properties file
    def signingPropFile = rootProject.file('local.properties')
    if (signingPropFile.canRead()) {
        def Properties signingProps = new Properties()
        signingProps.load(new FileInputStream(signingPropFile))
        key = signingProps['BINTRAY_KEY']
        user = signingProps['BINTRAY_USER']
    } else {
        throw new GradleException("Could not read local.properties!")
    }

    configurations = ['archives']

    pkg {
        repo = bintrayName
        name = mavenArtifactId
        desc = libraryDescription
        userOrg = bintrayOrg
        licenses = ['Apache-2.0']
        vcsUrl = "${repositoryUrl}.git"

        version {
            name = mavenVersion
            desc = libraryDescription
            released = new Date()
            vcsTag = mavenVersion
        }
    }
}
